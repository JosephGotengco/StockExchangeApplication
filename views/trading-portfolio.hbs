<!DOCTYPE html>
<html lang="en">

{{> head }}

<body>


	<!-- NAV BAR -->
	{{> loggedInNavbar}}
	<div class="container">
		<ul class="nav nav-tabs">
			<li class="active"><a data-toggle="tab" href="#home">Account Information</a></li>
			<li><a data-toggle="tab" href="#menu1">Transactions</a></li>
			<li><a data-toggle="tab" href="#menu2">Statistics</a></li>
		</ul>
	</div>

	<div class="tab-content tabs">
		<div id="home" class="tab-pane fade in active">
			<div class="container">
				<h1 class="display-4">Your Portfolio</h1>
				<p class="lead">Please note all prices are in {{{currency_code}}}.</p>
			</div>

			<div class='chfont container'>
				<p class="font-weight-bold">First Name: {{{firstname}}}</p>
				<p class="font-weight-bold">Last Name: {{{lastname}}}</p>
				<p class="font-weight-bold">User Name: {{{username}}}</p>
				<p class="font-weight-bold">Date Joined:
					{{#with date_joined}}
					{{day_joined}}, {{month_joined}} {{day_num_joined}}, {{year_joined}}
					{{/with}}</p>
				<p class="font-weight-bold">
					Stocks:
					{{#each title}}
					{{this.stock_name}} ({{this.amount}}),
					{{/each}}
				</p>
				<p class="font-weight-bold">Balance: {{{currency_symbol}}} {{head}}</p>
				<br>
			</div>
		</div>
		<div id="menu1" class="tab-pane fade">
			<div class="container">
				<h2 class="display-4">TRANSACTIONS</h2>
				<div class="table-responsive">
					<table name="mytable" class="table">
						<thead>
							<tr>
								<th>Date</th>
								<th>Company</th>
								<th>Quantity</th>
								<th>Amount ({{{currency_symbol}}})</th>
								<th>Balance ({{{currency_symbol}}})</th>
							</tr>
						</thead>
						<tbody>
							{{#each displayTransactions}}
							<tr>
								<td>{{this.year}}, {{this.month}} {{this.day}}</td>
								<td>{{this.stock_name}}</td>
								<td>{{this.qty}}</td>
								{{#ifEquals this.type "S"}}
								<td>{{this.price}}</td>
								{{else}}
								<td>-{{this.price}}</td>
								{{/ifEquals}}
								<td>{{this.balance}}</td>
							</tr>
							{{/each}}
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div id="menu2" class="tab-pane fade">
			<div class="container">
				<h3>Account Statistics</h3>
				<p>WORK IN PROGRESS</p>
				<div class="row">
					<div class="col-md-6">
						<canvas id="buy_vs_sell" width="200" height="100"></canvas>
					</div>
				</div>
			</div>
		</div>
	</div>



	<!-- Footer -->
	{{> footer}}


	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.22/vue.min.js'></script>

	<!-- ChartJS CDN 1 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js"
		crossorigin="anonymous"></script>

	<!-- ChartJS CDN 2 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"
		crossorigin="anonymous"></script>

	<!-- ChartJS CDN 3 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js" crossorigin="anonymous"></script>

	<!-- ChartJS CDN 4 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>

	<script>
		var userStatsData = {{{ json userStatsData }}};
		console.log(userStatsData);
		var ctx = document.getElementById('buy_vs_sell');
		data = {
			datasets: [{
				backgroundColor: ["#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850"],
				data: [userStatsData.amountBought, userStatsData.amountSold]
			}],

			// These labels appear in the legend and in the tooltips when hovering different arcs
			labels: [
				'Stocks Bought',
				'Stocks Sold'
			],
		};
		var myDoughnutChart = new Chart(ctx, {
			type: 'doughnut',
			data: data,
			options: {
				title: {
					display: true,
					text: 'Stocks Bought Vs Stocks Sold'
				}
			}
		});


	</script>
</body>

</html>












{{!-- 
	<!-- Portfolio -->
	<div class="container">
		<div class="jumbotron jumbotron-fluid">
			<div class="container">
				<h1 class="display-4">Your Portfolio</h1>
				<p class="lead">Please note all prices are in {{{currency_code}}}.</p>
			</div>

			<div class='chfont container'>
				<p class="font-weight-bold">First Name: {{{firstname}}}</p>
				<p class="font-weight-bold">Last Name: {{{lastname}}}</p>
				<p class="font-weight-bold">User Name: {{{username}}}</p>
				<p class="font-weight-bold">Date Joined:
					{{#with date_joined}}
					{{day_joined}}, {{month_joined}} {{day_num_joined}}, {{year_joined}}
					{{/with}}</p>
				<p class="font-weight-bold">
					Stocks:
					{{#each title}}
					{{this.stock_name}} ({{this.amount}}),
					{{/each}}
				</p>
				<p class="font-weight-bold">Balance: {{{currency_symbol}}} {{head}}</p>
				<br>
			</div>
		</div>
	</div>




	<div class="container footer-spacer">
		<div class="jumbotron jumbotron-fluid" style="padding: 20px 40px;">
			<h2 class="display-4">TRANSACTIONS</h2>
			<div class="table-responsive">
				<table name="mytable" class="table">
					<thead>
						<tr>
							<th>Date</th>
							<th>Company</th>
							<th>Quantity</th>
							<th>Amount ({{{currency_symbol}}})</th>
							<th>Balance ({{{currency_symbol}}})</th>
						</tr>
					</thead>
					<tbody>
						{{#each displayTransactions}}
						<tr>
							<td>{{this.year}}, {{this.month}} {{this.day}}</td>
							<td>{{this.stock_name}}</td>
							<td>{{this.qty}}</td>
							{{#ifEquals this.type "S"}}
							<td>{{this.price}}</td>
							{{else}}
							<td>-{{this.price}}</td>
							{{/ifEquals}}
							<td>{{this.balance}}</td>
						</tr>
						{{/each}}
					</tbody>
				</table>
			</div>
		</div>
	</div> --}}